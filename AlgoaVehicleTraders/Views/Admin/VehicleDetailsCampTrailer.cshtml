@model AlgoaVehicleTraders.Models.All.AddVehicleTrailerViewModel

@{
    ViewData["Title"] = "Admin - Edit Trailer";
    Layout = "_Layout";
}

<head>
    <link rel="stylesheet" href="~/css/AdminPage.css" asp-append-version="true">
    <link rel="stylesheet" href="~/css/Pagination.css" asp-append-version="true" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js" crossorigin="anonymous"></script>

    <style>
        /* Ensure buttons inside .form-actions are aligned */
        .form-actions {
            display: flex;
            gap: 10px; /* Adds space between buttons */
            justify-content: flex-end;
        }

            /* Primary button (Save Changes) */
            .form-actions #saveButton {
                background-color: #007bff; /* btn-primary background color */
                color: white; /* White text */
                padding: 10px 20px; /* Button padding */
                border-radius: 5px; /* Rounded corners */
                border: none; /* No border */
                cursor: pointer; /* Pointer cursor on hover */
                display: inline-block; /* Make it behave like a block element */
            }

                /* Primary button hover effect */
                .form-actions #saveButton:hover {
                    background-color: #0056b3; /* Darken the blue on hover */
                }

            /* Cancel button (already styled, added here for completeness) */
            .form-actions #cancelButton {
                text-decoration: none; /* Remove the default underline */
                color: white; /* White text */
                background-color: #dc3545; /* btn-danger background color */
                padding: 10px 20px; /* Button padding */
                border-radius: 5px; /* Rounded corners */
                display: inline-block; /* Make the link behave like a block element */
            }

                /* Cancel button hover effect */
                .form-actions #cancelButton:hover {
                    background-color: #c82333; /* Darken the red on hover */
                    cursor: pointer; /* Show pointer cursor */
                }

    </style>
</head>

<div class="admin-page-container">
    <div class="main-content">
        <h2>Edit Trailer Details</h2>

        <form asp-action="VehicleDetailsCampTrailer" method="post" enctype="multipart/form-data">
            <div class="form-grid" style="margin-bottom: 20px;">
                <div class="form-group">
                    <label asp-for="Brand">Brand</label>
                    <select asp-for="Brand" class="form-control select2" asp-items="Model.Brands" required>
                        <option value="">Select Brand</option>
                    </select>
                    <span asp-validation-for="Brand" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Model">Model</label>
                    <input asp-for="Model" class="form-control" />
                    <span asp-validation-for="Model" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Type">Type</label>
                    <select asp-for="Type" class="form-control select2" asp-items="Model.Types" disabled>
                        <option value="">Select Type</option>
                    </select>
                    <span asp-validation-for="Type" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="AxleType">Axle Type</label>
                    <select asp-for="AxleType" class="form-control select2" asp-items="Model.AxleTypes">
                        <option value="">Select Axle Type</option>
                    </select>
                    <span asp-validation-for="AxleType" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="BrakedAxle">Braked Axle</label>
                    <select asp-for="BrakedAxle" class="form-control select2" asp-items="Model.BrakedAxles">
                        <option value="">Select Braked Axle Type</option>
                    </select>
                    <span asp-validation-for="BrakedAxle" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="NumberAxle">Number of Axles</label>
                    <input asp-for="NumberAxle" class="form-control" type="number" />
                    <span asp-validation-for="NumberAxle" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Year">Year</label>
                    <input asp-for="Year" class="form-control" type="number" min="1900" max="2099" />
                    <span asp-validation-for="Year" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Price">Price</label>
                    <input asp-for="Price" class="form-control" type="number" step="0.01" />
                    <span asp-validation-for="Price" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Length">Length</label>
                    <input asp-for="Length" class="form-control" />
                    <span asp-validation-for="Length" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="TyreSize">Tyre Size</label>
                    <input asp-for="TyreSize" class="form-control" />
                    <span asp-validation-for="TyreSize" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Status">Status</label>
                    <select asp-for="Status" class="form-control select2" asp-items="Model.Statuss" required>
                        <option value="">Select Status</option>
                    </select>
                    <span asp-validation-for="Status" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Comments">Comments</label>
                    <textarea asp-for="Comments" class="form-control" rows="5"></textarea>
                    <span asp-validation-for="Comments" class="text-danger"></span>
                </div>
                <input type="hidden" name="OldStatus" value="@Model.Status" />
            </div>

            <h2>Camp Trailer Features</h2>
            <!-- Camp Trailer Section -->
            <div class="form-grid">

                <div class="form-group">
                    <label asp-for="CampTrailer.KitchenHas">Kitchen Has</label>
                    <textarea asp-for="CampTrailer.KitchenHas" class="form-control" required></textarea>
                    <span asp-validation-for="CampTrailer.KitchenHas" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="CampTrailer.Sleeper">Sleeper</label>
                    <textarea asp-for="CampTrailer.Sleeper" class="form-control" required></textarea>
                    <span asp-validation-for="CampTrailer.Sleeper" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.SpareTyre" id="SpareTyre" />
                        <label for="SpareTyre">Spare Tyre</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.Awning" id="Awning" />
                        <label for="Awning">Awning</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.Tent" id="Tent" />
                        <label for="Tent">Tent</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.Geyser" id="Geyser" />
                        <label for="Geyser">Geyser</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.WaterTank" id="WaterTank" />
                        <label for="WaterTank">Water Tank</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.WaterPump" id="WaterPump" />
                        <label for="WaterPump">Water Pump</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.VoltPowerSupply_12" id="VoltPowerSupply_12" />
                        <label for="VoltPowerSupply_12">12V Power Supply</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.VoltPowerSupply_220" id="VoltPowerSupply_220" />
                        <label for="VoltPowerSupply_220">220V Power Supply</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.Battery" id="Battery" />
                        <label for="Battery">Battery</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.ChargeSystem" id="ChargeSystem" />
                        <label for="ChargeSystem">Charge System</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.Add_A_Room" id="Add_A_Room" />
                        <label for="Add_A_Room">Add-A-Room</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="toggle-switch">
                        <input type="checkbox" asp-for="CampTrailer.GasBottles" id="GasBottles" />
                        <label for="GasBottles">Gas Bottles</label>
                    </div>
                </div>

            </div>

            <!-- Image Upload Section -->
            <div class="image-upload-section">
                <!-- Exterior Images -->
                <div class="image-upload-group">
                    <h4>Exterior: <span>Max 6 pics</span></h4>
                    <input type="file" name="ExteriorImages" multiple accept="image/*" id="exteriorImages"
                           onchange="setImageUpdateFlag('ExteriorImagesUpdated'); previewImages(event, 'exteriorPreview')">
                    <input type="hidden" name="ExteriorImagesUpdated" value="false" />
                </div>

                <!-- Interior Images -->
                <div class="image-upload-group">
                    <h4>Above: <span>Max 6 pics</span></h4>
                    <input type="file" name="InteriorImages" multiple accept="image/*" id="interiorImages"
                           onchange="setImageUpdateFlag('InteriorImagesUpdated'); previewImages(event, 'interiorPreview')">
                    <input type="hidden" name="InteriorImagesUpdated" value="false" />
                </div>

                <!-- Other Images -->
                <div class="image-upload-group">
                    <h4>Other: <span>Max 2 pics</span></h4>
                    <input type="file" name="OtherImages" multiple accept="image/*" id="otherImages"
                           onchange="setImageUpdateFlag('OtherImagesUpdated'); previewImages(event, 'otherPreview')">
                    <input type="hidden" name="OtherImagesUpdated" value="false" />
                </div>
            </div>

            <script>
                function setImageUpdateFlag(flagName) {
                    document.querySelector(`input[name='${flagName}']`).value = "true";
                }
            </script>

            @for (int i = 0; i < Model.ExteriorImageBase64?.Length; i++)
            {
                <input type="hidden" name="ExistingExteriorImages[@i]" value="@Model.ExteriorImageBase64[i]" />
            }
            @for (int i = 0; i < Model.InteriorImageBase64?.Length; i++)
            {
                <input type="hidden" name="ExistingInteriorImages[@i]" value="@Model.InteriorImageBase64[i]" />
            }
            @for (int i = 0; i < Model.OtherImageBase64?.Length; i++)
            {
                <input type="hidden" name="ExistingOtherImages[@i]" value="@Model.OtherImageBase64[i]" />
            }


            <!-- Submit and Cancel Buttons -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-lg" id="saveButton">Save Changes</button>
                <a asp-action="VehicleTrailerDetailsList" asp-controller="Admin" class="btn btn-danger btn-lg" id="cancelButton">Cancel</a>
            </div>
        </form>
    </div>
</div>
